<html>
    <head>
        <meta charset="utf-8">
        <title> JSON to Move List</title>
        <script src="javascript/chess.min.js"></script>
    </head>
    <body>
        <h1>This page includes a script which takes JSON and moves it back into a digestible move array</h1>
    </body>
    <script>

        /*
         * This script takes a JSON object then uses chess.js to play through the game.
         */
        
        // Initialize chess.js
        let chess = new Chess();

        /// Game JSON
        const firstGame = {
        "id":"lQbOOFU7",
        "rated":false,
        "variant":"standard",
        "speed":"blitz",
        "perf":"blitz",
        "createdAt":1633111378081,
        "lastMoveAt":1633111506906,
        "status":"resign",
        "players":{
            "white":{
                "user":{
                    "name":"smith",
                    "title":"IM",
                    "patron":true,
                    "id":"smith"
                },
                "rating":2471
            },
            "black":{
                "user":{
                    "name":"bob",
                    "id":"bob"
                },
                "rating":2306}
            },
            "winner":"white",
            "moves":"Nf3 Nf6 c4 c6 b3 g6 Bb2 Bg7 h4 b6 h5 Nxh5 Bxg7 Nxg7 d4 d5 Nc3 e6 e4 Na6 Bd3 Bb7 a3 Nc7 Qe2 Qd7 Rc1 O-O e5 f6 exf6 Rxf6 Ne5 Qe8 cxd5 exd5 Nd1 Nb5 Bxb5 cxb5 Rc7 Bc8 Ne3 Ne6 Nxd5",
            "clock":{
                "initial":180,
                "increment":0,
                "totalTime":180}
            };

            function getMovesFromJSON(JSONgame) {
                JSONgame = JSONgame.moves.split(' ');
                for (const move of JSONgame) { 
                    chess.move(move);
                    console.log(move);
                }
            }

            getMovesFromJSON(firstGame);
            console.log(chess.ascii());
    </script>
</html>